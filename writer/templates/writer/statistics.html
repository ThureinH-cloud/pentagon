{% extends 'writer/admin-dashboard.html' %}
{% load custom_filters %}


{% block writer %}
<div class=" w-full bg-base-200 m-3 max-h-fit">
  <div>
    <h2 class="text-center p-3 font-bold">Subscription Statistics</h2>

  </div>
    <table class="table">
      <!-- head -->
      <thead>
        <tr>
          <th>Subscription Id</th>
          <th>Name</th>
          <th>Plan</th>
          <th>Cost</th>
          <th>Billing Date</th>
          <th>Remaining Days</th>
          <th>Next Billing Date</th>
        </tr>
      </thead>
      <tbody>
        <!-- row 1 -->
        
        {% for account in accounts %}
        <tr>
            <td>
              {{account.paypal_subscription_id}}
            </td>
            <td>
              <div class="flex items-center gap-3">
                <div class="avatar">
                  <div class="mask mask-squircle h-12 w-12">
                    <img
                      src="{{account.get_user.profile.url}}"
                      alt="Avatar Tailwind CSS Component" />
                  </div>
                </div>
                <div>
                  <div class="font-bold">{{account.user}}</div>
                </div>
              </div>
            </td>
            <td>
                <div class="font-bold">{{account.subscription_plan}}</div>
            </td>
            <td>
                <div class="font-bold">$ {{account.subscription_cost|to_float}}</div>
            </td>
            <td>
              <div class="font-bold">{{account.created_at}}</div>
            </td>
            <td>
                <div class="font-bold">{{account.remaining}} Days</div>
            </td>
            <td>
              <div class="font-bold">{{account.expires_at}}</div>
            </td>
          </tr>
        {% endfor %}
      </tbody>
      <!-- foot -->
      <tfoot>
        <tr>
          <th>Total Subscriptions</th>
          <th>{{count}}</th>
          <th>Total Profit</th>
          <th>${{total_profit}}</th>
          <th></th>
        </tr>
      </tfoot>
    </table>
  </div>
{% endblock  %}